# 의존성 감사 체크리스트

> 이 문서는 SKILL.md에서 `references/dependency-audit-checklist.md`로 참조됨.

---

## 새 의존성 추가 전 체크리스트

### 필수 질문 (3가지)

| # | 질문 | 답변 |
|---|------|------|
| 1 | 이 라이브러리에서 실제로 사용하는 기능이 몇 줄인가? | |
| 2 | 그 몇 줄을 직접 작성하면 얼마나 걸리는가? | |
| 3 | 이 의존성이 6개월 후에도 안전하고 호환될 것이라 확신하는가? | |

### 정당화 조건 (하나 이상 충족해야 함)

- [ ] 전문 지식이 필요한 도메인 (암호화, 압축, 미디어 처리 등)
- [ ] 직접 구현하면 수백 줄 이상 + 엣지 케이스가 많은 경우
- [ ] 라이브러리가 성숙하고 유지보수가 활발 (최근 6개월 내 릴리스)
- [ ] 사용하는 기능이 라이브러리의 핵심 기능 (부수적 유틸리티가 아닌)
- [ ] 보안 취약점 패치가 신속하게 이루어지는 프로젝트

### 위험 신호 (하나라도 해당되면 재고)

- [ ] 라이브러리의 10% 미만 기능만 사용
- [ ] 최근 1년간 릴리스 없음
- [ ] 메인테이너가 1명
- [ ] 전이적 의존성(transitive dependency)이 50개 이상
- [ ] "다들 쓰니까"가 유일한 이유
- [ ] 네이티브 API로 대체 가능한 기능

---

## 기존 의존성 정기 감사

### 분기별 점검

1. **미사용 의존성 식별**
   - `npx depcheck` (Node.js)
   - `pip-autoremove --list` (Python)
   - `bundle clean --dry-run` (Ruby)

2. **보안 취약점 확인**
   - `npm audit` / `yarn audit`
   - `pip-audit`
   - `bundle audit`

3. **대체 가능성 평가**
   - 네이티브 API로 대체 가능한가?
   - 더 가벼운 대안이 있는가?
   - 사용하는 기능만 추출(tree-shaking)할 수 있는가?

### 의존성 제거 시 Orient-Step-Learn

1. **Orient**: 이 의존성이 하는 일, 사용 위치, 대체 방법 파악
2. **Step**: 하나의 의존성만 제거하고 테스트 실행
3. **Learn**: 빌드 통과? 런타임 에러? 성능 변화?

---

## 의존성의 숨은 비용

Dave Thomas가 말하는 "시한폭탄"의 구체적 형태:

- **Supply Chain Attack**: 2025년 9월 npm 사태 — chalk, debug 등 18개 패키지 해킹
- **Breaking Change**: 메이저 버전 업데이트 시 API 변경
- **Dependency Hell**: A가 B@1.x를 요구하고, C가 B@2.x를 요구
- **유지보수 중단**: 메인테이너가 프로젝트를 포기
- **라이선스 변경**: 오픈소스에서 상용으로 전환 (Redis, Elasticsearch 사례)
- **성능 부채**: 사용하지 않는 코드가 번들 크기와 빌드 시간을 증가

각 의존성은 이 위험들을 모두 내포한다.
"3줄을 아끼려고 이 위험을 감수할 가치가 있는가?"가 핵심 질문이다.
